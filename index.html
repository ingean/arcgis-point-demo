<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>Geodata AS - Demo</title>
    <link rel="icon" type="image/png" href="./images/geodata-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="./images/geodata-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="./images/geodata-96x96.png" sizes="96x96">

    <!-- ArcGIS Maps SDK for Javascript -->
    <script type="importmap">
      {
        "imports": {
          "@arcgis/": "https://js.arcgis.com/4.34/@arcgis/"
        }
      }
    </script>
    <script type="module" src="https://js.arcgis.com/4.34/map-components/"></script>
    <link id="jsapi-theme-light" rel="stylesheet" href="https://js.arcgis.com/4.34/@arcgis/core/assets/esri/themes/light/main.css" disabled>
    <link id="jsapi-theme-dark" rel="stylesheet" href="https://js.arcgis.com/4.34/@arcgis/core/assets/esri/themes/dark/main.css" />

    <!-- ArcGIS Calcite Design System -->
    <script src="https://js.arcgis.com/calcite-components/3.3.3/calcite.esm.js" type="module"></script>
    <link rel="stylesheet" href="https://js.arcgis.com/calcite-components/3.3.3/calcite.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

    <link rel="stylesheet" href="./css/main.css" />    
  </head>
  <body>
    <div id="calcite-theme" class="calcite-mode-dark">
      <calcite-shell content-behind>
        <calcite-navigation slot="header">
          <calcite-navigation-logo slot="logo"></calcite-navigation-logo>
          <calcite-navigation-user slot="user"></calcite-navigation-user>
        </calcite-navigation>

        <calcite-loader active></calcite-loader>

        <calcite-shell-panel slot="panel-start" position="start" display-mode="float-content" height="l" layout="vertical">
          <calcite-action-bar slot="action-bar" intl-collapse="Minimere" intl-expand="Maksimere">
              <calcite-action data-action-id="pop-query" icon="chart-magnifying-glass" text="Befolkningsdata"></calcite-action>
              <calcite-action data-action-id="viewshed" icon="viewshed" text="Siktanalyse"></calcite-action>
              <calcite-action data-action-id="volume" icon="cut-and-fill-volume-calculation" text="Volumanalyser"></calcite-action>
            </calcite-action-bar>
          </calcite-panel>

          <calcite-panel data-panel-id="pop-query" heading="Befolkningsstatistikk" scale="l">
            <calcite-block  heading="Statistikk for området" icon-start="chart-magnifying-glass" description="Klikk og dra musepekeren i kartet for å oppdatere statistikken" collapsible expanded>
              <calcite-block-section expanded text="Alderfordeling, mann vs kvinne">
                <canvas id="population-age" class="pop-chart"></canvas>
              </calcite-block-section>
              <calcite-block-section expanded text="Formue">
                <canvas id="population-wealth" class="pop-chart"></canvas>
              </calcite-block-section>
              <calcite-block-section expanded text="Bygningstyper">
                <canvas id="building-type" class="pop-chart"></canvas>
              </calcite-block-section>
            </calcite-block>
          </calcite-panel>

          <calcite-panel heading="Siktanalyse" height-scale="l" width-scale="m" data-panel-id="viewshed" hidden>
            <calcite-block  heading="Legg til utkikkspunkter" icon-start="viewshed" description="Analyser synligheten fra et utkikkspunkt i 3D-scenen." collapsible expanded>
            <calcite-button id="createButton" class="panel-button" icon-end="viewshed">Legg til utsiktspunkt</calcite-button>
            <calcite-button id="deleteButton" class="panel-button" style="display:none" icon-end="trash" kind="danger">Slett siktområder</calcite-button>
            <calcite-button id="cancelButton" class="panel-button" style="display:none" icon-end="x-circle" kind="inverse">Avbryt</calcite-button>
            </calcite-block>
            <calcite-block heading="Lysforhold" icon-start="brightness" description="Juster tid på dagen for å se hvordan solens posisjon påvirker siktlinjene." collapsible>
              <arcgis-shadow-cast id="shadow-cast-ui" reference-element="sceneDiv"></arcgis-shadow-cast>
            </calcite-block>
            <calcite-block  heading="Byggeprosjekt" icon-start="3d-building" description="Legg til et byggeprosjekt for å se hvordan det påvirker siktlinjene." collapsible expanded>
              <calcite-label layout="inline">
                Slå på byggeprosjekt
                <calcite-switch id="building-visibility-switch"></calcite-switch>
              </calcite-label>
              <calcite-label>
                Antall etasjer
                <calcite-slider id="building-levels-slider" min="1" max="9" value="9" label-handles label-ticks min-label="1" max-label="9" ticks="1"></calcite-slider>
              </calcite-label>
            </calcite-block>
          </calcite-panel>

          <calcite-panel heading="Volumanalyser" height-scale="l" width-scale="m" data-panel-id="volume" hidden>
            <div class="panel-tool-container">
               <calcite-block  heading="Utfylling- og skjæringsformål" icon-start="cut-and-fill-volume-calculation" description="Beregn volumet av jord som må fjernes eller legges til for å jevne ut et område." collapsible expanded>
                <calcite-label layout="inline-space-between" id="unit-label">
                  Enheter
                  <calcite-select id="units-select" scale="s">
                    <calcite-option value="metric" selected>Metrisk</calcite-option>
                    <calcite-option value="imperial">Imperial</calcite-option>
                    <calcite-option value="cubic-meters">Kubikkmeter</calcite-option>
                    <calcite-option value="cubic-kilometers">Kubikkkilometers</calcite-option>
                    <calcite-option value="cubic-feet">Cubic feet</calcite-option>
                    <calcite-option value="cubic-yards">Cubic yards</calcite-option>
                    <calcite-option value="cubic-miles">Cubic miles</calcite-option>
                  </calcite-select>
                </calcite-label>
                <calcite-label alignment="start" layout="inline-space-between">
                  Fjernet masse
                  <div id="cut-volume" class="measurement-vals">—</div>
                </calcite-label>
                <calcite-label alignment="start" layout="inline-space-between">
                  Utfylt masse
                  <div id="fill-volume" class="measurement-vals">—</div>
                </calcite-label>
                <calcite-label alignment=" start" layout="inline-space-between">
                  Totalt volum
                  <div id="net-volume" class="measurement-vals">—</div>
                </calcite-label>
                <calcite-label id="edit-measurement-label">
                  <calcite-button id="edit-measurement" width="full">Redigere måling</calcite-button>
                </calcite-label>
              </calcite-block>
            </div>
          </calcite-panel>
        </calcite-shell-panel>
        
        <!--calcite-shell-panel slot="panel-end" position="end" display-mode="float" scale="l" layout="vertical">
          <calcite-panel data-panel-id="pop-query" heading="Befolkningsstatistikk" scale="l">
            <canvas id="population-age" class="pop-chart"></canvas>
            <canvas id="population-wealth" class="pop-chart"></canvas>
            <canvas id="building-type" class="pop-chart"></canvas>
          </calcite-panel>
        </calcite-shell-panel-->

        <arcgis-map id="mapDiv" item-id="5c5fdf55cfed43109373ead88f8901bc" auto-destroy-disabled>
          <arcgis-search position="bottom-right"></arcgis-search>
          <arcgis-zoom position="bottom-right"></arcgis-zoom>
        </arcgis-map>

        <arcgis-scene id="sceneDiv" item-id="bac30fa0028a41a48c174f1b71e0c379" auto-destroy-disabled>
          <calcite-alert label="Measurement unavailable" kind="warning" scale="s">
            <div slot="title">Volumberegning utilgjengelig</div>
            <div slot="message" id="error-message"></div>
          </calcite-alert>
        </arcgis-scene>
        
      </calcite-shell>
    
    </div> <!-- Calcite-theme-->
  </body>
  <script type="module" src="js/main.js"></script>
</html>